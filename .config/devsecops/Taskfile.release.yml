---
version: "3"

tasks:
  default:
    desc: Run all generic release tasks
    cmds:
      - cmd: |
          if [[ "{{.TASK_COMMITIZEN_ENABLED}}" == "true" ]]; then
            echo "üì¶ Running commitizen bump for release..."
            OVERRIDE_TASK_CZ_BUMP_DRY_RUN="false" OVERRIDE_TASK_CZ_BUMP_YES="true" task {{.TASK_FLAGS}} commitizen:bump
            echo "{{.TASK_SEPARATOR}}"
          else
            echo "‚ö†Ô∏è Skipping commitizen bump (disabled via TASK_COMMITIZEN_ENABLED=false)"
          fi
        silent: true
      - cmd: |
          if [[ "{{.TASK_KANIKO_ENABLED}}" == "true" ]]; then
            echo "üöÄ Running Kaniko image push..."
            OVERRIDE_TASK_KANIKO_PUSH="true" task {{.TASK_FLAGS}} kaniko
            echo "{{.TASK_SEPARATOR}}"
          else
            echo "‚ö†Ô∏è Skipping Kaniko push (disabled via TASK_KANIKO_ENABLED=false)"
          fi
        silent: true
