{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":semanticCommits",
    ":semanticCommitTypeAll(fix)"
  ],
  "onboarding": false,
  "requireConfig": "optional",
  "prConcurrentLimit": 1,
  "semanticCommits": "enabled",
  "semanticCommitType": "fix",
  "semanticCommitScope": "deps",
  "dependencyDashboard": true,
  "includePaths": [".config/devsecops/.copier-answers.yml", "project/**"],
  "allowedCommands": [
    "^git checkout -- \\. && git clean -fd && task copier:update TASK_COPIER_CLI_OPTS='--trust --skip-answered --defaults --vcs-ref .+'$"
  ],
  "packageRules": [
    {
      "description": "DevSecOps plugin: update .copier-answers.yml and run task copier:update to regenerate all files",
      "matchManagers": ["copier"],
      "matchFileNames": [".config/devsecops/.copier-answers.yml"],
      "semanticCommitType": "feat",
      "semanticCommitScope": "devsecops",
      "commitMessageTopic": "DevSecOps plugin",
      "postUpgradeTasks": {
        "commands": [
          "git checkout -- . && git clean -fd && task copier:update TASK_COPIER_CLI_OPTS='--trust --skip-answered --defaults --vcs-ref {{{newVersion}}}'"
        ],
        "fileFilters": ["**/*"],
        "executionMode": "branch"
      }
    },
    {
      "description": "Auto-detect dependencies in project/",
      "matchFileNames": ["project/**"],
      "automerge": true,
      "platformAutomerge": true,
      "automergeType": "pr",
      "automergeStrategy": "fast-forward",
      "prCreation": "immediate"
    }
  ]
}
