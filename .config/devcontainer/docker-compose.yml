# kics-scan ignore
---
services:
  debian:
    build:
      context: ../..
      dockerfile: .config/devcontainer/debian/Dockerfile
      args:
        USERNAME: ${USER:-developer}
        http_proxy: ${http_proxy:-}
        HTTP_PROXY: ${HTTP_PROXY:-}
        https_proxy: ${https_proxy:-}
        HTTPS_PROXY: ${HTTPS_PROXY:-}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${HOME}:/home/${USER:-developer}
      - /sys/fs/cgroup:/sys/fs/cgroup
    environment:
      - HTTP_PROXY=${HTTP_PROXY:-}
      - HTTPS_PROXY=${HTTPS_PROXY:-}
      - http_proxy=${http_proxy:-}
      - https_proxy=${https_proxy:-}
    command: sleep infinity
    working_dir: ${PWD:-/home/developer/workspace/project}
    init: true
    privileged: true
    group_add:
      - docker
    cap_add:
      - ALL
    cgroup: private
    healthcheck:
      test: ["CMD", "task", "--version"]
      interval: 30s
      timeout: 10s
      start_period: 5s
      retries: 3
